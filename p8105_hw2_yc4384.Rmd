---
title: "p8105_hw2_yc4384"
author: "Yangyang Chen"
date: "`r Sys.Date()`"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(lubridate)
library(tools)
```

## Problem 1

**First:**

* Clean the data in `pols-month.csv`. 
* Use `separate()` to break up the variable `mon` into integer variables `year`, `month`, and `day`.
* Replace month number with month name 
* Create a `president` variable taking values `gop` and `dem`.
* Remove `prez_dem` and `prez_gop`; and remove the `day` variable.
```{r}
pols_df = 
  read_csv("data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day")) |> 
  mutate(month = month.abb[as.numeric(month)]) |> 
  mutate(president  = gov_dem) |> 
  select(-c(prez_dem,prez_gop)) |> 
  select(-day) 
```

**Second:** 

* Clean the data in snp.csv using a similar process to the above.
* Arrange according to year and month.
* Organize so that `year` and `month` are the leading columns.
```{r}
snp_df = 
  read_csv("data/snp.csv") |> 
  janitor::clean_names() |> 
  mutate(date = mdy(date)) |> 
  separate(date, into = c("year", "month", "day")) |> 
  mutate(month = month.abb[as.numeric(month)]) |> 
  mutate(year = ifelse(as.numeric(year) >= 2050 & as.numeric(year)<= 2068, as.numeric(year) - 100, as.numeric(year))) |> 
  select(-day,) |> 
  mutate(year = as.character(year)) |> 
  relocate(year, month)
```

**Third:** 

* Tidy the unemployment data so that it can be merged with the previous datasets. 
* This process will involve switching from “wide” to “long” format.
* Ensuring that key variables have the same name.
* Ensuring that key variables take the same values.

```{r}
unemploy_df = 
  read_csv("data/unemployment.csv") |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemploy_rate"
  ) |> 
  janitor::clean_names() |> 
  mutate(year = as.character(year)) |> 
  mutate(month = toTitleCase(month)) |> 
  relocate(year, month)
```

**Date Description:** 

* Join the datasets by merging snp into pols.
* Merging unemployment into the result.

```{r}
prob1_df = 
pols_df |>  
  left_join(snp_df, by = c("year", "month")) |> 
  left_join(unemploy_df, by = c("year", "month"))

```
* **`pols_df`** contains `r nrow(pols_df) - 1` observations and 'r ncol(pols_df)' variables, decribing the number of national politicians who are democratic or republican at any given time.

* **snp_df** contains `r nrow(snp_df) - 1` observations and 'r ncol(snp_df)' variables, describing Standard & Poor’s stock market index (S&P), often used as a representative measure of stock market as a whole.

* **unemploy_df** contains `r nrow(unemploy_df) - 1` observations and 'r ncol(unemploy_df)' variables, describing the percentage of unemployment in each month of the associated year.

* **prob1_df** is the `r dim(prob1_df)[1]` * `r dim(prob1_df)[2]` dimention result dataset, which contains  `r nrow(prob1_df) - 1` observations and `r ncol(prob1_df) - 1` variables. It ranges from `r range(prob1_df$year)[1]` to  `r range(prob1_df$year)[2]`. It's variable conbined all key variables in **`pols_df`**, **snp_df** and **unemploy_df** datasets. including `r colnames(prob1_df)`. 


## Problem 2

